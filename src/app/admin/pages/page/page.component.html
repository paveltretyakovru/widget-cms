<div class="page">
  <div class="page__panel" *ngIf="page">
    <ng-container
      *ngTemplateOutlet="pagePanel">
    </ng-container>
  </div>

  <div class="page__grid" *ngIf="page">
    <app-grid
      [data]="page.data"
      [widgets]="widgets"
      [movable]="true"
      [editable]="true"
      [showGrid]="true"
      [showPanel]="true"
      [resizable]="true"
      [cols]="page.size.cols"
      [rows]="page.size.rows"
      [gridWidth]="1200"
      [gridHeight]="page.size.height"
      (widgetsUpdated)="onWidgetsUpdated($event)">
    </app-grid>
  </div>
</div>

<!-- Templates -->
<!-- Page panel -->
<ng-template #pagePanel>
  <div class="row middle-xs">
    <div class="col-md-2 col-xs-6">
      <mat-form-field class="widget-player__form-field">
        <input
          type="text"
          matInput
          placeholder="Page name"
          [(ngModel)]="page.name">
      </mat-form-field>
    </div>

    <div class="col-md-2 col-xs-6">
      <button mat-stroked-button
        color="primary"
        (click)="onClickSavePage()">
        Save page
      </button>   
    </div>

    <div class="col-md-2 col-xs-6">
      <app-remove-button
        *ngIf="page?._id"
        [items]="[{ id: page._id, apiModel: 'pages', label: 'Page: ' + page.name }]"
        [afterRedirectTo]="'/admin/pages'">
      </app-remove-button>
    </div>
  </div>
</ng-template>